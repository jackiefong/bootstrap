apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: elastic
  namespace: argocd
spec:
  destination:
    name: ''
    namespace: logging
    server: 'https://kubernetes.default.svc'
  source:
    path: ''
    repoURL: 'https://Helm.elastic.co'
    targetRevision: 7.12.0
    chart: elasticsearch
    helm:
      parameters:
        - name: replicas
          value: '2'
        - name: esJavaOpts
          value: '-Xmx512m -Xms512m'
        - name: volumeClaimTemplate.resources.requests.storage
          value: 1Gi
        - name: resources.limits.cpu
          value: 3000m
        - name: resources.requests.cpu
          value: 100m
        - name: resources.limits.memory
          value: 1000M
        - name: resources.requests.memory
          value: 1000M
  project: operation
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
          - CreateNamespace=true      
